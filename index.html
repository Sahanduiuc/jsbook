<!doctype html>
<script src="static/js/orderbook.js"></script>

<link rel="stylesheet" href="static/css/orderbook.css">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link href="static/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<body>

  <div class="background"></div>

  <div class="buttonPanel">
    <button onclick="playPress()"><i id="play-button" class="fa fa-play" aria-hidden="true"></i></button>
    <button onclick="addPress()"><i id="play-button" class="fa fa-plus" aria-hidden="true"></i></button>
    <button onclick="deletePress()"><i id="play-button" class="fa fa-minus" aria-hidden="true"></i></button>
    <button onclick="executePress()"><i id="play-button" class="fa fa-mail-forward" aria-hidden="true"></i></button>
  </div>

  <!-- Button script -->
  <script>
    function playPress() {
      button = document.getElementById("play-button");
      if (button.className == "fa fa-play") {
        console.log("play pressed");
        button.className = "fa fa-pause";
      } else if (button.className == "fa fa-pause") {
        console.log("pause pressed");
        button.className = "fa fa-play";
      }
    }
    function addPress() {
      console.log("add pressed");
      var order = randomOrder(book, 'add');
      if (order != null) {
        book.update(order);
        display.drawFrame();
      }
    }
    function deletePress() {
      console.log("delete pressed");
      var order = randomOrder(book, 'del');
      if (order != null) {
        book.update(order);
        display.drawFrame();
      }
    }
    function executePress() {
      console.log("execute pressed");
      var order = randomOrder(book, 'mkt');
      if (order != null) {
        book.update(order);
        display.drawFrame();
      }
    }
  </script>

  <script>

    var book = new OrderBook();
    var display = new Display(document.body, book);

    addEventListener("keydown", function(event) {
      if (event.keyCode == 65) {
        // console.log("add order submitted...");
        // var order = new Order('add', 'bid', 9098, 100, 83992356);
        var order = randomOrder(book, 'add');
        if (order != null) {
          book.update(order);
          display.drawFrame();
        }
      }
    });
    addEventListener("keydown", function(event) {
      if (event.keyCode == 68) {
        // console.log("delete order submitted...");
        // var order = new Order('del', 'bid', 9098, 100, 83992356);
        var order = randomOrder(book, 'del');
        if (order != null) {
          book.update(order);
          display.drawFrame();
        }
      }
    });
    addEventListener("keydown", function(event) {
      if (event.keyCode == 69) {
        // console.log("market order submitted...");
        // var order = new Order('mkt', 'bid', null, 10, 90892213);
        var order = randomOrder(book, 'mkt');
        if (order != null) {
          book.update(order);
          display.drawFrame();
        }
      }
    });

    simulate(book, display);

  </script>

</body>
