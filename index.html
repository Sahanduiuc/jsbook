<!doctype html>
<script src="static/js/orderbook.js"></script>

<link rel="stylesheet" href="static/css/orderbook.css">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link href="static/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<body>

  <div class="buttonPanel">
    <button class="button" onclick=playPress(book,display)><i class="fa fa-pause" id="playButton"></i></button>
    <button class="button" onclick=addPress()><i class="fa fa-plus" id="addButton"></i></button>
    <button class="button" onclick=delPress()><i class="fa fa-minus" id="delButton"></i></button>
    <button class="button" onclick=mktPress()><i class="fa fa-flash" id="mktButton"></i></button>
  </div>

  <script>

    var book = new OrderBook();
    var display = new Display(document.body, book);

    function playPress(book, display) {
      button = document.getElementById("playButton");
      if (button.className == "fa fa-pause") {
        console.log("pause pressed");
        display.playing = false;
        button.className = "fa fa-play";
      } else if (button.className == "fa fa-play") {
        console.log("play pressed");
        button.className = "fa fa-pause";
        display.playing = true;
        simulate(book, display);
      }
    }
    function addPress() {
      console.log("add pressed");
      var order = randomOrder(book, 'add');
      if (order != null) {
        book.update(order);
        display.drawFrame();
      }
    }
    function delPress() {
      console.log("delete pressed");
      var order = randomOrder(book, 'del');
      if (order != null) {
        book.update(order);
        display.drawFrame();
      }
    }
    function mktPress() {
      console.log("execute pressed");
      var order = randomOrder(book, 'mkt');
      if (order != null) {
        book.update(order);
        display.drawFrame();
      }
    }

    addEventListener("keydown", function(event) {
      if (event.keyCode == 65) {
        // console.log("add order submitted...");
        // var order = new Order('add', 'bid', 9098, 100, 83992356);
        var order = randomOrder(book, 'add');
        if (order != null) {
          book.update(order);
          display.drawFrame();
        }
      }
    });
    addEventListener("keydown", function(event) {
      if (event.keyCode == 68) {
        // console.log("delete order submitted...");
        // var order = new Order('del', 'bid', 9098, 100, 83992356);
        var order = randomOrder(book, 'del');
        if (order != null) {
          book.update(order);
          display.drawFrame();
        }
      }
    });
    addEventListener("keydown", function(event) {
      if (event.keyCode == 69) {
        // console.log("market order submitted...");
        // var order = new Order('mkt', 'bid', null, 10, 90892213);
        var order = randomOrder(book, 'mkt');
        if (order != null) {
          book.update(order);
          display.drawFrame();
        }
      }
    });

    initialize(book, display);
    simulate(book, display);

  </script>

</body>
